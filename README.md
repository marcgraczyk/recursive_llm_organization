# Recursive research organization

## Overview of the initial mechanism 

**high-level:**
* minimal design of the research organization
    * proposals can only be submitted through an LLM
    * proposal = committed weights of the LLMs + highest bidder on the delta of generalized prompts for that "slot", sequential model, one delta reward at a time (higher evaluation horizon also means higher price since the bidder needs to buy out the opportunity cost of the experiments the organization isn't running; more sophisticated mechanisms could allow for non-interfering experiments)
    * A weight setter and a proposer (the one prompting the weight setter's LLM and submitting the proposal)
    * they both get rewarded through a share of the delta of the market cap during a given event impact timeframe (e.g 10% each)
        
    

### An LLM that serves the research organization

The research organization is structured as a group that is served by an LLM each slot. This LLM represents the group and acts on behalf of the group by submitting a proposal to the organization. Each slot a different proposal generated by an underlying LLM is chosen through an auction mechanism that we describe below. The entities behind the proposal are then rewarded in a token issued by the research organization. The proposal object is very general. It can be any change to the state of the organization such as funding or not funding a specific project, allocating a (retroactive) grant etc. A proposal is constructed from two elements: the weights that define the LLM and the prompting structure applied to the LLM. Each of these elements can involve a different entity, the entity that sets the weights (the weight setter) and the one that both writes the prompt and submits the proposal (the proposer). The weights of the LLM have to be pre-committed before the proposal is submitted. 

The only way to submit a proposal to the organization is through an LLM. The organization would enforce the following rules on a proposal:
* a prompt would need to be written according to pre-defined valid prompt structures
* the LLM needs to be aligned with the organization (a minima this means that the LLM is generated from the pre-commited weights)

Any proposal not abidding these rules would be rejected. This would initially be enforced by social consensus. A proposal would be submitted optimistically and every member of the organization would vote on the proposal. There would also be a veto period before the proposal is executed where anyone can challenge the proposal as not respecting the rules outlined above. We would then fallback to a dispute resolution mechanism (e.g a trusted enclave). 

The advantage of this system is that you can always find some set of weights that could lead to a proposal. One could initially start with OpenAI models or with previously committed weights. This provides a minimal functional framework where we can re-use existing infra (basic DAO infra, OP stack etc). One of the first bounties the organization would then release would be about automating this social consensus.

### Advice auction mechanism


A second price auction would occur before each slot for the right to submit a proposal. The fact that after submission the proposal goes through a voting process structures the LLM generated proposal as an advice to a group since the group can decide to act or not upon it. This makes our mechanism an [Advice Auction](http://www.nikete.com/advice_auctions.pdf) where the organization will share a part of the reward it obtained from following the proposal with the auction winners. This reward is initially best quantified as the increase in the market cap of the organization's token. The auction winners, the weight setter and the proposer, would then be rewarded by a linear share of the delta in market cap during a given time period minus the second highest bid. This time period could initially be the length of a slot but this could be further refined. Importantly the rewards can be negative if the price of the token goes down therefore each entity would need to put forward collateral in the organization's token. One limitation of this reward mechanism is that we can only have one proposal submitted at the time.

The mechanism allows to bypass the problem of the initial offering since we reward participants based on their skills at executing the organization's objective. There remains the difficulty of the price as being part of the test function we are proposing. There is thus some desire to have the network auction off tokens each period to get a price for the allocation within the proposal.



### Reward mechanism : a share of the delta in market cap during the proposal time

The reward described above is justified at first since a sensible initial objective and measure of public good for the organization is the price of the organization's token. This reward share would then be split between the weight setter and the proposer. The time delta should end when the proposal finalizes in case of the weight setter (the length of a slot could depend on the proposal or alternatively a proposal could be elected for various slots). This is less clear in the case of the proposer which could initially set a timeframe for their reward (shorter than the time length of the proposal) that is subjectively evaluated. 

The simplest way of dividing the reward between the weight setter and the proposer is through a fixed percentage. For example, if the reward consists in 20% of the increase in market cap then this could be divided into two equal sub-allocations of 10%. A more involved method that could be developed in future work would be rewarding the entities based on their estimated contribution to the increased market cap. Intuitively, the real margin contribution should come from the weight setter since the prompt is only active during the time of the proposal execution. 

If there are no active proposals during a slot, we could allocate the same reward regardless to the weight setter elected for the previous proposal. This would continue until there is a new proposal, they are out of collateral (in case of negative rewards) or until they force exit (and recuperate their collateral) bringing the DAO into a lock position.


### Formalism

A non empty slot $t$ consists in the following parameters $(t, b_i, P, A_w, A_p, \text{LLM}_w)$ where $b_i$ is the winning bid in the advice auction, $P$ is the generated proposal by the underlying $\text{LLM}_w$, $A_w$ is the entity that set the weights and $A_p$ is the entity that engineered the prompt and submitted the proposal. The payment rule to both $A_p$ and $A_w$ is:

$$\alpha r - \max b_{-i}$$
where $r$ is the delta in the nominal valuation of the total token supply during $t$.

### Generative governance

An appealing aspect of recursion and generative governance is that you can update to new reward methods via the mechanism itself. This evolution of the mechanism could be different depending on the type of the group served by the LLM e.g different between an LLM executing advisory governance (such as here) and an LLM that serves a marketplace. 

### Addressing the intrinstic stochasticity of LLMs
LLMs are stochastic / non-deterministic since their outputs are generated from a probability distribution over the next token. We therefore need a mechanism to deal with this stochasticity. The proposals could for example be constituted of a sample of the LLM answers (e.g a 100 samples). One would then choose the median answer / model answer. This would be the answer that would be verified in case of dispute. Even with a fixed seed, floating point instabilities imply that one can obtain different equilibrias under the stochastic gradient descent underpinning the LLM. This would deserve more research and should be part of future work.

### Motivation : retroactive public good funding

The presented mechanism can be motivated by the integration of retroactive funding mechanisms within the proposals to allocate funds along the objectives of the research organization, which is also a way of addressing the question of the initial value of the token issued by the research organization (there are no revenue streams initially). Indeed, the mechanism aims at identifying the LLM that will best allocate ressources to the future welfare maximising games. Hence, the value of the token is not justified by the initial present value of the mechanism but by the future value of the welfare maximising games. Under symmetry and under a retroactive mechanism, the welfare maximising games should emerge as a Shelling point. This is particularly relevant when we expect multiple such networks (such as the research organization) to permissionlessly emerge and funding to be allocated across groups.

